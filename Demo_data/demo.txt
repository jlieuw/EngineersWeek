CREATE TABLE users (
    id UNIQUEIDENTIFIER PRIMARY KEY,
    username NVARCHAR(50) NOT NULL,
    email NVARCHAR(100) NOT NULL UNIQUE,
    created_at DATETIME NOT NULL DEFAULT GETDATE()
);

CREATE TABLE projects (
    id UNIQUEIDENTIFIER PRIMARY KEY,
    name NVARCHAR(100) NOT NULL,
    description NVARCHAR(MAX),
    created_at DATETIME NOT NULL DEFAULT GETDATE()
);

CREATE TABLE issues (
    id UNIQUEIDENTIFIER PRIMARY KEY,
    project_id UNIQUEIDENTIFIER FOREIGN KEY REFERENCES projects(id),
    title NVARCHAR(150) NOT NULL,
    description NVARCHAR(MAX),
    status NVARCHAR(20) NOT NULL,
    assigned_user_id UNIQUEIDENTIFIER FOREIGN KEY REFERENCES users(id),
    created_at DATETIME NOT NULL DEFAULT GETDATE(),
    updated_at DATETIME NOT NULL DEFAULT GETDATE()
);

CREATE TABLE comments (
    id UNIQUEIDENTIFIER PRIMARY KEY,
    issue_id UNIQUEIDENTIFIER FOREIGN KEY REFERENCES issues(id),
    user_id UNIQUEIDENTIFIER FOREIGN KEY REFERENCES users(id),
    comment NVARCHAR(MAX) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT GETDATE()
);
